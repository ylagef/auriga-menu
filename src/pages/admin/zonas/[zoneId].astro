---
import Admin from '@components/Admin.astro'
import ButtonLink from '@components/ButtonLink.astro'
import ButtonLinksContainer from '@components/ButtonLinksContainer.astro'
import CreateZone from '@components/CreateZone'
import Divider from '@components/Divider.astro'
import LineCard from '@components/LineCard.astro'
import { getZoneById, getZoneBySlug, getZones, supabase } from 'src/utils/supabase'

const cookies = Astro.request.headers.get('cookie')

const token = cookies
  ?.split(';')
  .find((c) => c.trim().startsWith('sup-access-token='))
  ?.split('=')[1]

if (!token) return Astro.redirect('/admin/login')

const { data: user, error } = await supabase.auth.api.getUser(token)
console.log({ user, error })
if (error) return Astro.redirect('/admin/login')

export interface Props {
  zoneId: number
}

const { zoneId } = Astro.params

// const zone = await getZoneById({ zoneId })
---

<!-- <Admin>
  <LineCard label="Zonas">
    <ButtonLinksContainer>
      {zones.map((zone) => <ButtonLink href={`/admin/${zone.slug}`}>{zone.name}</ButtonLink>)}

      <Divider theme="dark" />
    </ButtonLinksContainer>

    <CreateZone client:visible />
  </LineCard>
</Admin> -->
